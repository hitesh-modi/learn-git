<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Insert title here</title>
<link href="http://fonts.googleapis.com/css?family=Open+Sans:400,700"
	rel="stylesheet" />
<!-- The main CSS file -->
<link href="../css/style.css" rel="stylesheet" />
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css"/>
</head>
<body>
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.9/angular.min.js"></script>
    <script type="text/javascript">
        var app = angular.module('CutomerPopupApp', [])
        app.controller('CustomerPopupController', function ($scope, $window) {
            $scope.customers = $window.customers;
            $scope.selectRow = function(customer) {
            	console.log('Selected row',customer);
            	$window.opener.setSelectedCustomer(customer);
            	$window.close();
            }
        });
    </script>
    
    <div ng-app="CutomerPopupApp" ng-controller="CustomerPopupController">
    <table class="table table-striped">
    	<tr>
    		<th>Select</th>
    		<th>Name</th>
    		<th>Email</th>
    		<th>Mobile</th>
    		<th>Phone</th>
    		<th>Address</th>
    		<th>State</th>
    		<th>State Code</th>
    		<th>GSTIN</th>
    	</tr>
    	<tr ng-repeat="customer in customers">
    		<td><input type="radio" name="selectedCustomer" value="{{customer}}" ng-model="selected.value" ng-change="selectRow({{customer}})">Select</td>
    		<td>{{customer.name}}</td>
    		<td>{{customer.email}}</td>
    		<td>{{customer.mobileNo}}</td>
    		<td>{{customer.phoneNo}}</td>
    		<td>{{customer.address}}</td>
    		<td>{{customer.state}}</td>
    		<td>{{customer.stateCode}}</td>
    		<td>{{customer.gstin}}</td>
    	</tr>
    </table>
        
    </div>
</body>
</html>